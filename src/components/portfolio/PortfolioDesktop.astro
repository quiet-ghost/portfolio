---
import BottomNav from "@/components/portfolio/BottomNav.astro";
import MainWorkspace from "@/components/portfolio/MainWorkspace.astro";
import TopBar from "@/components/portfolio/TopBar.astro";
import WindowPool from "@/components/portfolio/WindowPool.astro";
import type { Keybind, PortfolioClientData, SocialLink } from "@/types/portfolio";

interface Props {
  availabilityLabel: string;
  email: string;
  location: string;
  resumePath: string;
  socials: SocialLink[];
  keybinds: Keybind[];
  clientData: PortfolioClientData;
}

const { availabilityLabel, email, location, resumePath, socials, keybinds, clientData } = Astro.props;
const serializedClientData = JSON.stringify(clientData).replace(/</g, "\\u003c");
---

<main class="desktop" id="top">
  <TopBar />
  <MainWorkspace availabilityLabel={availabilityLabel} email={email} />
  <WindowPool email={email} location={location} resumePath={resumePath} socials={socials} />
</main>

<BottomNav keybinds={keybinds} email={email} />

<script is:inline id="portfolio-client-data" type="application/json" set:html={serializedClientData}></script>
<script>
  import "@/scripts/portfolio/portfolioApp.ts";
</script>
